{% extends 'base.html' %}
{% block title %}Прохождение теста{% endblock %}
{% block content %}
<div class="max-w-2xl mx-auto pt-10">
  <h1 class="text-2xl font-bold mb-2">Результат пользователя "{{ result.user.fio }}"</h1>
  <div class="mb-4 text-gray-500">
    Тест: <b>{{ result.test.title }}</b> |
    Балл: <span class="text-blue-700 font-semibold">{{ result.score }}</span>
    {% if result.started_at and result.passed_at %}
      | Время: 
      <span class="text-blue-800 font-semibold">
        {{
          ((result.passed_at - result.started_at).total_seconds() // 60) | int
        }} мин
        {{
          ((result.passed_at - result.started_at).total_seconds() % 60) | int
        }} сек
      </span>
    {% endif %}
  </div>
  <ol class="space-y-4">
    {% for ua in result.answers %}
    <li class="bg-gray-50 p-4 rounded-xl shadow">
      <div class="mb-2"><span class="font-semibold">{{ ua.question.text }}</span></div>
      <div>
        <span class="inline-block px-3 py-1 rounded-xl 
            {% if ua.answer.is_correct %}bg-green-100 text-green-800{% else %}bg-red-100 text-red-800{% endif %}">
          {{ ua.answer.text }}
          {% if ua.answer.is_correct %}✔{% else %}✗{% endif %}
        </span>
        <span class="ml-2 text-xs text-blue-700">({{ ua.answer.score }} бал.)</span>
      </div>
    </li>
    {% endfor %}
  </ol>
  <a href="{{ url_for('tests.test_results', test_id=result.test.id) }}"
     class="mt-6 inline-block px-6 py-2 rounded-lg bg-blue-100 text-blue-800 hover:bg-blue-200">← Назад к списку</a>
</div>
{% endblock %}
